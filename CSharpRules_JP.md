
# C#開発のルール (OreOreCSharpRules)

## 1. 本規約について
　このルールは、基本的に開発での命名ルールなどを自分なりにまとめたものです。
　そのため、このルールがすべて正しいとは限りません。
　あくまでも参考にしていただき、細かい点については、各開発者で自分に合ったルールに作りかえていただければと思います。
 
 ## 2. C#コーディング関係のガイドラインについて
 　Microsoft社がMSDNで基本的なC#のコーディング規約などを公開していますので、こちらをまずはご一読ください。

* Ref. C#のコーディング規則 (C# プログラミング ガイド)
https://msdn.microsoft.com/ja-jp/library/ff926074(v=vs.140).aspx

* Ref. 名前に関するガイドライン
https://msdn.microsoft.com/ja-jp/library/ms229002(v=vs.100).aspx

* Ref. C# プログラムの一般構造 (C# プログラミング ガイド)
https://msdn.microsoft.com/ja-jp/library/w2a9a9s3(v=vs.140).aspx

* Ref. メンバーのデザインのガイドライン
https://msdn.microsoft.com/ja-jp/library/ms229059(v=vs.100).aspx

## 3. 基本的なルール

### 3.1. Private フィールド, パラメータ(引数), 変数
* 名前付け形式　Camel形式
* Ex. employeeID, userName

### 3.2. プロパティ, メソッド, イベント
* 名前付け形式　Pascal形式
* Ex. Public String EmplyeeID, Private void Login()

### 3.3. コントロール名, イベントハンドラメソッド
* 名前付け形式　Pascal形式
* Ex. CancelButton, CancelButton_Click
* Visual Studioでは、イベントハンドラメソッドを自動生成することができます。
自動生成されるイベントハンドラメソッドは、「(コントロール名)_(イベント名)」の形式で
名前が自動的に付けられるため、3.2.を満たすためにPascal形式で名前を付けています。

## 4. 命名の規則

### 4.1. クラス
* 名前付け形式　Pascal形式
* 名前　名詞, 名詞句, 形容詞句
* 下表のクラスについては、適切なサフィックス(接尾辞)またはプレフィックス(接頭辞)を付けます。

| 要素                          | 規則                              | Ex.                                  |
|:---------------------:|:------------------------:|:-------------------------:|
|例外クラス                 | ...Exception                  | ArgumentNullException |
|テストクラス              | ...Test                          | EmployeeTest                 |
|コレクションクラス   | ...Collection                  | EmployeeCollection       |
|属性クラス 　　　　  | ...Attribute                    | DisplayAttribute             |
|抽象クラス 　　　　  | Abstract...                     | AbstractCompany          |
|例外クラス 　　　　  | (Event名) + EventArgs | MouseEventArgs            |

### 4.2. インターフェース
* 名前付け形式　Pascal形式
* 名前　名詞, 名詞句, 形容詞句
* 下表のインターフェースについては、適切なサフィックス(接尾辞)またはプレフィックス(接頭辞)を付けます。

| 要素                                       | 規則      | Ex.               |
|:------------------------------:|:-------:|:-------------:|
|インターフェース                   | I...         | IGroup          |
|能力付与型インターフェース  | I...able  | IDisposable |

### 4.3. メソッド
* 名前付け形式　Pascal形式
* 名前　動詞, 動詞句
* 下表のメソッドについては、適切なサフィックス(接尾辞)またはプレフィックス(接頭辞)を付けます。

| 要素                                       | 規則                                    | Ex.                       |
|:------------------------------:|:---------------------------:|:------------------:|
|戻り値がBool型                       | Is + 形容詞                        | IsEdited                |
|                                                | Can + 動詞                        | CanEditable         |
|                                                | Has + 名詞                        | HasError              |
|ファクトリーメソッド             | Create + オブジェクト名  | ToString               |
|初期化                                      | Initialize + 初期化名         | InitializeProperty  |
|                                                 | Init + 初期化名                 | InitEventHandler  |

### 4.4. プロパティ
* 名前付け形式　Pascal形式
* 名前　名詞, 名詞句, 形容詞
* 下表のプロパティについては、適切なサフィックス(接尾辞)またはプレフィックス(接頭辞)を付けます。

| 要素                                       | 規則                                    | Ex.                       |
|:------------------------------:|:---------------------------:|:------------------:|
|Bool型                                     | Is + 形容詞                        | IsEdited                |
|                                                | Can + 動詞                        | CanEditable         |
|                                                | Allow + 名詞                      | AllowEdit             |
|Enum型                                   | 名詞 + Mode                      | EditMode             |
|                                                | 名詞 + Type                       | UserType             |

### 4.5. イベント
* 名前付け　Pascal形式
* 名前　動詞, 動詞句
* Ex. Click, Tick

### 4.6. フィールド
* 名前付け　Camel形式 (Private), Pascal形式 (Private以外)
* 名前　名詞, 名詞句, 形容詞

### 4.7. イベントハンドラ
* 名前付け　Pascal形式
* 名前　EventHanlderのサフィックス(接尾辞)
* Ex. MouseClickEventHandler

### 4.8. 列挙型, 列挙体
* 名前付け　Pascal形式
* 名前　例外を除き、サフィックス(接尾辞)はつけない
* Ex. Teams
* 例外　クラス名と同名を名前に付ける場合、例外でEnumのサフィックス(接尾辞)をつける
* Ex. ClassAEnum

### 4.9. コントロール名
* 名前付け　Pascal形式
* 名前　特に指定なし
* 下表では、主なコントロールのサフィックス(接尾辞)について紹介します。

| 要素         | Ex.                                       |
|:----------:|:----------------------------:|
|Button系   | OkButton, CancelButton    |
|Editor系    | NameEdit, StartDateEdit    |
|Label系     | TitleLabel, NameLabel       |

## 5. コーディング時に意識すること

### 5.1. 1メソッドあたり30行以内におさめる
1メソッドあたりの行数は、30行以内におさまるように目指します。
30行を超える場合は、以下を参考におさまるようリファクタリングを行います。
* ただし、Switchを使用している場合は例外です。

### 5.2. 1メソッドは1機能のみ
1つのメソッドに複数の機能を持たせると、再利用性が低くなる原因となります。
たとえば、行追加のメソッド(AddRow)内で、行追加と保存の処理を行うなどです。
* この場合、行追加と保存の処理は異なるメソッドに分けておき、それぞれを呼び出します。

### 5.3. 不要なコードは削除する
ソースコードをTeamFoundationServerやGitなどで適切に管理している場合、
不要なソースコードやコメントは削除すべきです。
不要なソースコードやコメントは、可読性を低くする原因となります。

### 5.4. ネスト構造は浅くする
ネスト構造は浅くするべきです。
もし、深くなってしまう場合には、複数のメソッドに分けてしまうことを検討します。
ネスト構造が深くなると、可読性が低くする原因となります。

* Ex. ネスト構造の深い例
if ( val1 == 1 ) {
　if ( val2 == 2 ) {
　　if ( val3 == 3 ) {
　　　Method1();
　　}
　　Method2();
　}
　Method3();
}

### 5.5. アクセス権は厳格に
アクセス権は、できる限り厳格に設定します。
アクセス権を厳格にしておくことで、外部からアクセスした場合に
不要な項目が見えないため、目的のプロパティやメソッドなどを
早く見つけることが可能となります。

### 5.6. if, for, usingなどの { } は基本省略する
if文やfor文などで使用する { } は、基本的に省略するようにします。
* Ex. if ( val == null ) return null;

### 5.7. ビジネスロジックは別プロジェクトで
ビジネスロジックは、常に同じ動作をすることが求められます。
そのため、基本的には別プロジェクトで作成しておき、
そのプロジェクトを参照してロジックを実行するようにします。
各々のプロジェクトで独自実装を行うことは、
改修時に無用な混乱を招く恐れがあります。

### 5.8. イベントハンドラの設定はロジック内で
イベントハンドラの設定は、初期化メソッド(InitializeEventHandlerなど)として
コードに書いておくことをおすすめします。
そうすることで、検索などからイベント定義を確認することができます。

### 5.9. イベントハンドラメソッド内ではメソッドの呼び出しのみ行う
イベントハンドラメソッド内では処理を行わず、
処理が定義されているメソッドを実行するようにします。
そうすることで機能の重複を防ぎ、再利用性を高めることができます。





